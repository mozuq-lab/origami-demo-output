# 観点レビュー: F-003 会員登録

## 生成情報

- 生成日時: 2026-02-23 00:00
- 入力ソース: 04_テストケース.md, 01_機能詳細.md
- 参照カタログ: テスト観点カタログ v1.6（TIS株式会社, CC BY-SA 4.0）
- アプリ種別: web
- 対象機能: F-003 会員登録
- 総観点数: 27件（対象: 27件 / 対象外: 0件）
- 信号分布: 🟢 10件 / 🟡 13件 / 🔴 4件

---

## カバレッジサマリー

| セクション | 対象観点数 | 🟢 カバー済 | 🟡 未カバー推奨 | 🔴 要確認 | カバー率 |
|-----------|-----------|------------|----------------|----------|---------|
| バリデーション（VAL） | 10 | 6 | 3 | 1 | 60% |
| ウェブアプリケーション（WEB） | 5 | 2 | 3 | 0 | 40% |
| セキュリティ共通（SEC-C） | 4 | 1 | 2 | 1 | 25% |
| セキュリティウェブ（SEC-W） | 4 | 0 | 2 | 2 | 0% |
| ユーザビリティ（USA） | 4 | 1 | 3 | 0 | 25% |
| **合計** | **27** | **10** | **13** | **4** | **37%** |

※補完テストケース案（STC-003-01〜11）をすべて反映した場合、カバー率は推定 **85%** に向上

---

## 🟢 カバー済み観点

| # | 観点ID | 観点名 | 対応テストケース | カテゴリ |
|---|--------|--------|----------------|---------|
| 1 | VP-VAL-001 | 必須入力チェック | TC-003-10, TC-003-11, TC-003-12, TC-003-13 | バリデーション |
| 2 | VP-VAL-002 | 最小文字数チェック（パスワード8文字境界） | TC-003-14（7文字NG）, TC-003-15（8文字OK） | バリデーション |
| 3 | VP-VAL-004 | 使用可能文字種チェック（電話番号の数字以外） | TC-003-25（ハイフン入りNG） | バリデーション |
| 4 | VP-VAL-005 | 入力形式チェック（メールアドレスフォーマット） | TC-003-19（@なし）, TC-003-20（ドメインなし）, TC-003-21（ローカルパートなし） | バリデーション |
| 5 | VP-VAL-006 | 数値桁数チェック（電話番号11桁境界） | TC-003-22（10桁NG）, TC-003-23（11桁OK）, TC-003-24（12桁NG） | バリデーション |
| 6 | VP-VAL-007 | 複数フィールドの一致チェック（パスワード確認） | TC-003-17（一致OK）, TC-003-18（不一致NG） | バリデーション |
| 7 | VP-WEB-001 | 正常系の画面遷移（登録後の遷移） | TC-003-34, TC-003-35 | ウェブ |
| 8 | VP-WEB-005 | ナビゲーションリンクの動作 | TC-003-03（ナビゲーション表示確認） | ウェブ |
| 9 | VP-SEC-C-002 | 機密情報のマスク表示（パスワードフィールド） | TC-003-37（パスワードマスク確認） | セキュリティ共通 |
| 10 | VP-USA-004 | 入力補助・ガイド表示（ヒント文・入力例） | TC-003-04（パスワード説明文）, TC-003-05（電話番号入力例） | ユーザビリティ |

---

## 🟡 未カバー推奨観点

| # | 観点ID | 観点名 | 推奨理由 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-VAL-003 | 最大文字数チェック | フォーム入力フィールドに上限が設定されている場合が多く、氏名・住所・メールアドレスへの長大文字列入力時の挙動（登録成功またはエラー）が未確認 | バリデーション |
| 2 | VP-VAL-008 | 一意性チェック（重複メールアドレス登録防止） | 境界値分析（BV-001-06）では🟡として分析済みだが、テストケースへの明示的な反映が確認できない。同一メールアドレスでの再登録試行時の動作確認が推奨 | バリデーション |
| 3 | VP-VAL-010 | バリデーションエラーメッセージの適切性 | エラー表示自体はM-003-05で確認されているが、各フィールドのエラーメッセージの内容・表示位置・フィールドとの対応付けが詳細には未確認 | バリデーション |
| 4 | VP-WEB-002 | 登録後のブラウザバックによる再送信防止 | 登録成功後にブラウザの「戻る」ボタンを押してフォームに戻り再送信した場合、二重登録が発生しないかが未確認 | ウェブ |
| 5 | VP-WEB-003 | ログイン済みユーザーによる直接URLアクセス | ログイン済み状態でsignup.htmlに直接アクセスした場合の挙動（リダイレクト等）が未確認（01_機能詳細.mdでも🟡として記載） | ウェブ |
| 6 | VP-WEB-004 | フォーム二重送信防止（登録ボタン連打） | 「登録」ボタンを短時間に連続クリックした場合に同一メールアドレスで複数レコードが作成されないかが未確認 | ウェブ |
| 7 | VP-SEC-C-001 | アクセス制御（認証状態によるアクセス制限） | ログイン済みユーザーが会員登録ページにアクセスした場合にどのように制御されるか（リダイレクト・警告表示等）が未確認 | セキュリティ共通 |
| 8 | VP-SEC-C-003 | センシティブデータの安全な保存 | 登録データがLocal Storageに保存される際、パスワードが平文か否かが未確認。テスト自動化練習サイトのためセキュリティ要件は🟡だが、実態の確認が推奨される | セキュリティ共通 |
| 9 | VP-SEC-W-001 | XSS対策（スクリプトインジェクション） | 氏名・住所フィールド等にHTML/JavaScriptを含む文字列（`<script>alert('XSS')</script>` 等）を入力した場合、マイページ表示時にスクリプトが実行されないことが未確認 | セキュリティウェブ |
| 10 | VP-SEC-W-002 | 入力値のサニタイズ（特殊文字のエスケープ） | `<`, `>`, `"`, `'`, `&` 等のHTML特殊文字を含む入力値が、Local Storageへの保存・画面表示時に適切にエスケープされるかが未確認 | セキュリティウェブ |
| 11 | VP-USA-001 | エラーメッセージの内容と品質 | エラーメッセージが具体的な制約条件を示しているか（例: 「入力してください」ではなく「8文字以上のパスワードを入力してください」）が未確認 | ユーザビリティ |
| 12 | VP-USA-002 | キーボードアクセシビリティ（Tab移動・フォーカス順序） | Tabキーによるフォーカス移動がメールアドレス→パスワード→パスワード確認→氏名の論理的な順序で機能するか、Enterキーによる送信が機能するかが未確認 | ユーザビリティ |
| 13 | VP-USA-003 | 登録完了時の操作フィードバック | 登録成功時に明確なフィードバック（成功メッセージ・確認表示・遷移先の明示）が提供されるかが未確認（01_機能詳細.mdで遷移先は🟡） | ユーザビリティ |

---

## 🔴 要確認観点

| # | 観点ID | 観点名 | 確認内容 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-VAL-009 | 複数フィールドの複合バリデーション | 複数フィールドが同時にバリデーションエラーになった場合、すべてのエラーが一度に表示されるか、それとも先頭のエラーのみ表示されるか。仕様書に明示的な記載なし | バリデーション |
| 2 | VP-SEC-C-004 | ログ・監査証跡 | 会員登録操作のサーバーサイドログの記録要否。当サイトはLocal StorageのみでDBを持たないクライアントサイド構成のため、ログ要件はステークホルダー確認が必要 | セキュリティ共通 |
| 3 | VP-SEC-W-003 | CSRF対策 | 会員登録フォームへのCSRF攻撃対策（CSRFトークン等）の実装有無と要否。テスト自動化練習サイトのため対策の有無はステークホルダー確認が必要 | セキュリティウェブ |
| 4 | VP-SEC-W-004 | クリックジャッキング対策 | 会員登録フォームをiframeで埋め込まれた場合のクリックジャッキング対策（X-Frame-Optionsヘッダー等）の有無。ページレベルの設定のためステークホルダー確認が必要 | セキュリティウェブ |

---

## 補完テストケース案

🟡項目に対する補完テストケース案を以下に示します。

### STC-003-01: 入力フィールドへの長大文字列入力時の挙動確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-01 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-VAL-003 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録ページ（signup.html）が表示されている

**When（実行条件）:**

1. 氏名フィールドに100文字以上の長大文字列（例: 「あ」を101文字）を入力する
2. その他の必須項目（メールアドレス・パスワード・パスワード確認）を有効値で入力する
3. 「登録」ボタンをクリックする

**Then（期待結果）:**

- [ ] 登録が成功する（最大文字数制限なし）、またはバリデーションエラーが表示される
- [ ] アプリケーションがクラッシュしない
- [ ] ブラウザのフリーズや異常な動作が発生しない

**根拠:** テスト観点カタログ VP-VAL-003 に基づく補完

---

### STC-003-02: 登録済みメールアドレスによる重複登録の防止確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-02 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-VAL-008 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- テストユーザー（例: `ichiro@example.com`）が既にLocal Storageに登録されている

**When（実行条件）:**

1. 会員登録ページ（signup.html）を開く
2. メールアドレスに既登録の `ichiro@example.com` を入力する
3. パスワード・パスワード確認・氏名を有効値で入力する
4. 「登録」ボタンをクリックする

**Then（期待結果）:**

- [ ] 登録が拒否される（重複エラーが表示される）
- [ ] Local Storageのデータが上書きされない

**根拠:** テスト観点カタログ VP-VAL-008 に基づく補完（境界値分析 BV-001-06 より）

---

### STC-003-03: バリデーションエラーメッセージの表示位置と内容の確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-03 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-VAL-010 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録ページ（signup.html）が表示されている

**When（実行条件）:**

1. パスワードフィールドに「pass」（4文字、8文字未満）を入力する
2. その他の必須項目を有効値で入力する
3. 「登録」ボタンをクリックする

**Then（期待結果）:**

- [ ] パスワードフィールドの近傍にエラーメッセージが表示される
- [ ] エラーメッセージには「8文字以上」等の具体的な制約条件が含まれる
- [ ] 正常入力済みの他フィールドの値がクリアされない

**根拠:** テスト観点カタログ VP-VAL-010 に基づく補完

---

### STC-003-04: 登録後のブラウザバックによる二重登録防止

| 項目 | 内容 |
|------|------|
| テストID | STC-003-04 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-WEB-002 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録が完了し、登録後のページ（マイページまたはトップページ）が表示されている

**When（実行条件）:**

1. ブラウザの「戻る」ボタンをクリックして会員登録フォームに戻る
2. 「登録」ボタンをクリックする（フォームの再送信を試みる）

**Then（期待結果）:**

- [ ] 同一メールアドレスでの二重登録が発生しない（エラーが表示されるか、再送信が無効化されている）

**根拠:** テスト観点カタログ VP-WEB-002 に基づく補完

---

### STC-003-05: ログイン済みユーザーによる会員登録ページへの直接アクセス

| 項目 | 内容 |
|------|------|
| テストID | STC-003-05 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-WEB-003, VP-SEC-C-001 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- テストユーザー（例: `ichiro@example.com`）でログイン済みの状態である

**When（実行条件）:**

1. ブラウザのアドレスバーに `signup.html` のURLを直接入力してアクセスする

**Then（期待結果）:**

- [ ] ログイン済みユーザーが会員登録フォームに不正アクセスできない（リダイレクト等）、またはアクセス可能な場合は適切なUI表示となっている
- 注: 仕様書に明示的な記載がないため、実際の挙動を確認・記録する

**根拠:** テスト観点カタログ VP-WEB-003、VP-SEC-C-001 に基づく補完

---

### STC-003-06: 登録ボタンの連続クリックによる二重送信防止

| 項目 | 内容 |
|------|------|
| テストID | STC-003-06 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-WEB-004 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録フォームの全必須項目が入力済みである

**When（実行条件）:**

1. 「登録」ボタンを素早く2回連続でクリックする

**Then（期待結果）:**

- [ ] 同一メールアドレスで2件の登録レコードがLocal Storageに作成されない
- [ ] 2回目のクリックが無視されるか、ボタンが一時的に無効化されている

**根拠:** テスト観点カタログ VP-WEB-004 に基づく補完

---

### STC-003-07: Local StorageへのパスワードXXX保存形式の確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-07 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-SEC-C-003 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**

- 新規ユーザーで会員登録が完了している

**When（実行条件）:**

1. ブラウザの開発者ツール（F12）を開く
2. Application タブ → Local Storage を確認する
3. 登録ユーザーのデータを確認する

**Then（期待結果）:**

- [ ] パスワードの保存形式を確認・記録する
- [ ] パスワードが平文で保存されている場合は🔴リスクとして記録する
- 注: テスト自動化練習サイトのため、平文保存の可能性は高いが、実態を把握しておくことが推奨される

**根拠:** テスト観点カタログ VP-SEC-C-003 に基づく補完

---

### STC-003-08: フォームフィールドへのXSSペイロード入力

| 項目 | 内容 |
|------|------|
| テストID | STC-003-08 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-SEC-W-001, VP-SEC-W-002 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録ページ（signup.html）が表示されている

**When（実行条件）:**

1. 氏名フィールドに `<script>alert('XSS')</script>` を入力する
2. 住所フィールドに `<b>太字テスト</b>` を入力する
3. その他の必須項目を有効値で入力する
4. 「登録」ボタンをクリックして登録を完了する
5. マイページ（mypage.html）を表示する

**Then（期待結果）:**

- [ ] マイページ表示時にJavaScriptアラートが実行されない（XSS未発生）
- [ ] 氏名・住所の値がHTMLエスケープされて表示される（`&lt;script&gt;` 等）
- [ ] アプリケーションの表示が崩れない

**根拠:** テスト観点カタログ VP-SEC-W-001、VP-SEC-W-002 に基づく補完

---

### STC-003-09: エラーメッセージの内容品質確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-09 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-USA-001 |
| テスト種別 | ユーザビリティ |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録ページ（signup.html）が表示されている

**When（実行条件）:**

1. パスワードに「pass」（4文字）を入力する
2. パスワード確認に異なる値「word」を入力する
3. メールアドレスに「testexample.com」（@なし）を入力する
4. 氏名は空のまま「登録」ボタンをクリックする

**Then（期待結果）:**

- [ ] 各フィールドのエラーメッセージが対応するフィールドの近傍に表示される
- [ ] エラーメッセージは具体的な制約条件を示している（例: 「8文字以上のパスワードを入力してください」）
- [ ] エラーが複数ある場合、すべてのエラーが表示される

**根拠:** テスト観点カタログ VP-USA-001 に基づく補完

---

### STC-003-10: Tabキーによるフォームフォーカス移動順序の確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-10 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-USA-002 |
| テスト種別 | ユーザビリティ |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録ページ（signup.html）が表示されている

**When（実行条件）:**

1. ページの最初の入力フィールド（メールアドレス）にフォーカスをあてる
2. Tabキーを繰り返し押してフォーカスを移動する

**Then（期待結果）:**

- [ ] フォーカスが論理的な順序（メールアドレス → パスワード → パスワード確認 → 氏名 → ...）でフィールド間を移動する
- [ ] フォーカスが画面外の要素にトラップされない
- [ ] フォーカスのあたっているフィールドが視覚的に識別できる

**根拠:** テスト観点カタログ VP-USA-002 に基づく補完

---

### STC-003-11: 登録完了時の成功フィードバック確認

| 項目 | 内容 |
|------|------|
| テストID | STC-003-11 |
| 対象機能 | F-003: 会員登録 |
| 対応観点 | VP-USA-003 |
| テスト種別 | ユーザビリティ |
| 信号 | 🟡 |

**Given（前提条件）:**

- 会員登録フォームの全必須項目が入力済みである（バリデーション通過状態）

**When（実行条件）:**

1. 「登録」ボタンをクリックする

**Then（期待結果）:**

- [ ] 登録が成功したことを示すフィードバックが提供される（成功メッセージ、確認ダイアログ、またはマイページへの遷移）
- [ ] ユーザーが登録の成否を明確に判断できる
- [ ] 登録失敗時は失敗したことが明示される

**根拠:** テスト観点カタログ VP-USA-003 に基づく補完

---

## 優先対応一覧

| # | 観点ID | 観点名 | 対応方針 | 信号 |
|---|--------|--------|---------|------|
| 1 | VP-SEC-W-001 | XSS対策 | 補完テストケース案あり（STC-003-08） | 🟡 |
| 2 | VP-SEC-W-002 | 入力値のサニタイズ | 補完テストケース案あり（STC-003-08と連動） | 🟡 |
| 3 | VP-VAL-008 | 重複メールアドレス登録防止 | 補完テストケース案あり（STC-003-02） | 🟡 |
| 4 | VP-SEC-C-003 | センシティブデータの安全な保存 | 補完テストケース案あり（STC-003-07） | 🟡 |
| 5 | VP-WEB-002 | ブラウザバック後の二重登録防止 | 補完テストケース案あり（STC-003-04） | 🟡 |
| 6 | VP-WEB-004 | フォーム二重送信防止 | 補完テストケース案あり（STC-003-06） | 🟡 |
| 7 | VP-VAL-010 | バリデーションエラーメッセージの適切性 | 補完テストケース案あり（STC-003-03） | 🟡 |
| 8 | VP-WEB-003 | ログイン済みユーザーのアクセス制御 | 補完テストケース案あり（STC-003-05） | 🟡 |
| 9 | VP-VAL-003 | 最大文字数チェック | 補完テストケース案あり（STC-003-01） | 🟡 |
| 10 | VP-SEC-W-003 | CSRF対策 | ステークホルダー確認（テスト練習サイトの対策要否を確認） | 🔴 |
| 11 | VP-SEC-C-004 | ログ・監査証跡 | ステークホルダー確認（クライアントサイドのみの構成のため） | 🔴 |
| 12 | VP-VAL-009 | 複数フィールド同時エラー時の表示 | ステークホルダー確認（全エラー同時表示 vs 先頭エラーのみ）| 🔴 |

---

## 参照カタログ情報

- **原典**: テスト観点カタログ v1.6
- **著作者**: TIS株式会社
- **ライセンス**: CC BY-SA 4.0 (Creative Commons Attribution-ShareAlike 4.0 International)
- **抽出範囲**: ブラックボックステスト関連項目（5セクション、203項目）
- **適用セクション**: バリデーション（VAL）、ウェブアプリケーション（WEB）、セキュリティ共通（SEC-C）、セキュリティウェブ（SEC-W）、ユーザビリティ（USA）

---

## 次のステップ

### 補完テストケースの反映

🟡項目の補完テストケース案を既存のテストケースに反映するには:

1. **手動追記**: `04_テストケース.md` に補完テストケース案をコピーして追記
2. **再生成**: 動作仕様（`02_動作仕様.md`）に観点を追加した上で、`/origami:generate-cases` を再実行

### 確認事項

- 🔴項目についてステークホルダーに確認
- 🟡項目の補完テストケース案の妥当性を確認
- カバレッジ目標（推奨: 🟢 70%以上）の達成状況を確認（現在37%、補完後推定85%）
