# F-007 プラン一覧表示 動作仕様

## 基本情報

| 項目 | 内容 |
|------|------|
| 機能ID | F-007 |
| 機能名 | プラン一覧表示 |
| 入力ファイル | 01_機能詳細.md |

---

## Must（できなければならない）

### M-001: ページ表示

| No | 項目 | 信頼性 |
|----|------|--------|
| M-001-01 | ページタイトルが「宿泊プラン一覧 \| HOTEL PLANISPHERE - テスト自動化練習サイト」であること | 🟢 |
| M-001-02 | ページアクセス時にAjaxでプランデータを読み込むこと | 🟢 |
| M-001-03 | データ読み込み中に「Loading...」が表示されること | 🟢 |
| M-001-04 | データ読み込み完了後にプランカードが表示されること | 🟢 |

### M-002: ナビゲーション表示（未ログイン時）

| No | 項目 | 信頼性 |
|----|------|--------|
| M-002-01 | 「ホーム」リンクが表示されること | 🟢 |
| M-002-02 | 「宿泊予約」リンクが表示されること | 🟢 |
| M-002-03 | 「会員登録」リンクが表示されること | 🟢 |
| M-002-04 | 「ログイン」リンクが表示されること | 🟢 |

### M-003: ナビゲーション表示（ログイン時）

| No | 項目 | 信頼性 |
|----|------|--------|
| M-003-01 | 「ホーム」リンクが表示されること | 🟢 |
| M-003-02 | 「宿泊予約」リンクが表示されること | 🟢 |
| M-003-03 | 「マイページ」リンクが表示されること | 🟢 |
| M-003-04 | 「ログアウト」リンクが表示されること | 🟢 |

### M-004: 未ログイン時のプラン表示

| No | 項目 | 信頼性 |
|----|------|--------|
| M-004-01 | 未ログイン時に「素泊まり」（id=4）が表示されること | 🟢 |
| M-004-02 | 未ログイン時に「出張ビジネスプラン」（id=5）が表示されること | 🟢 |
| M-004-03 | 未ログイン時に「エステ・マッサージプラン」（id=6）が表示されること | 🟢 |
| M-004-04 | 未ログイン時に「貸し切り露天風呂プラン」（id=7）が表示されること | 🟢 |
| M-004-05 | 未ログイン時に「カップル限定プラン」（id=8）が表示されること | 🟢 |
| M-004-06 | 未ログイン時に「テーマパーク優待プラン」（id=9）が表示されること | 🟢 |
| M-004-07 | 未ログイン時に計6件のプランが表示されること | 🟢 |

### M-005: 一般会員ログイン時のプラン表示

| No | 項目 | 信頼性 |
|----|------|--------|
| M-005-01 | 一般会員ログイン時に「ディナー付きプラン」（id=2）が追加表示されること | 🟢 |
| M-005-02 | 一般会員ログイン時に「お得なプラン」（id=3）が追加表示されること | 🟢 |
| M-005-03 | 一般会員ログイン時に計8件のプランが表示されること | 🟢 |

### M-006: プレミアム会員ログイン時のプラン表示

| No | 項目 | 信頼性 |
|----|------|--------|
| M-006-01 | プレミアム会員ログイン時に「プレミアムプラン」（id=1）が追加表示されること | 🟢 |
| M-006-02 | プレミアム会員ログイン時に計9件のプランが表示されること | 🟢 |

### M-007: プランカードのUI要素

| No | 項目 | 信頼性 |
|----|------|--------|
| M-007-01 | 各プランカードにプラン名が表示されること | 🟢 |
| M-007-02 | 各プランカードに大人1名料金（¥X,XXX円）が表示されること | 🟢 |
| M-007-03 | 各プランカードに最小利用人数（X名様から）が表示されること | 🟢 |
| M-007-04 | 各プランカードに客室タイプが表示されること | 🟢 |
| M-007-05 | 各プランカードに「このプランで予約」ボタンが表示されること | 🟢 |

### M-008: 会員限定バッジの表示

| No | 項目 | 信頼性 |
|----|------|--------|
| M-008-01 | 「ディナー付きプラン」「お得なプラン」に「会員限定」バッジが表示されること | 🟢 |
| M-008-02 | 「プレミアムプラン」に「❤️プレミアム会員限定❤️」バッジが表示されること | 🟢 |
| M-008-03 | 制限なしのプランにはバッジが表示されないこと | 🟢 |

### M-009: 予約ボタンの動作

| No | 項目 | 信頼性 |
|----|------|--------|
| M-009-01 | 「このプランで予約」ボタンをクリックすると `reserve.html?plan-id={id}` が新しいタブで開くこと | 🟢 |

### M-010: ナビゲーション遷移

| No | 項目 | 信頼性 |
|----|------|--------|
| M-010-01 | 「ホーム」リンクからトップページに遷移できること | 🟢 |

---

## Never（できてはいけない）

### N-001: 非表示プランの誤表示

| No | 項目 | 信頼性 |
|----|------|--------|
| N-001-01 | id=0（お得な特典付きプラン）が一覧に表示されてはいけない | 🟢 |
| N-001-02 | 未ログイン時に会員限定プラン（id=2, 3）が表示されてはいけない | 🟢 |
| N-001-03 | 未ログイン時にプレミアム会員限定プラン（id=1）が表示されてはいけない | 🟢 |
| N-001-04 | 一般会員時にプレミアム会員限定プラン（id=1）が表示されてはいけない | 🟢 |

### N-002: データキャッシュ問題

| No | 項目 | 信頼性 |
|----|------|--------|
| N-002-01 | 同一ページを連続して開いた際に古いキャッシュデータが表示されてはいけない（Date.nowによるキャッシュ回避が機能していること） | 🟡 |

---

## 信号サマリー

| 信号 | 件数 | 内容 |
|------|------|------|
| 🟢 | 38 | ページタイトル、Loading表示、ナビゲーション8項目、未ログイン時プラン6件+件数確認、一般会員プラン追加2件+件数確認、プレミアム会員プラン追加1件+件数確認、プランカードUI5要素、会員バッジ3件、予約ボタン動作、ホームリンク遷移、非表示プラン4件 |
| 🟡 | 1 | キャッシュ回避の動作確認（Date.nowの効果） |
| 🔴 | 0 | - |
