# 観点レビュー: F-001 ログイン

## 生成情報

- 生成日時: 2026-02-23
- 入力ソース: 04_テストケース.md, 01_機能詳細.md
- 参照カタログ: テスト観点カタログ v1.6（TIS株式会社, CC BY-SA 4.0）
- アプリ種別: web
- 対象機能: F-001 ログイン
- 総観点数: 30件（対象: 30件 / 対象外: 0件）
- 信号分布: 🟢 12件 / 🟡 14件 / 🔴 4件

---

## カバレッジサマリー

| セクション | 対象観点数 | 🟢 カバー済 | 🟡 未カバー推奨 | 🔴 要確認 | カバー率 |
|-----------|-----------|------------|----------------|----------|---------|
| バリデーション（VAL） | 7 | 3 | 4 | 0 | 43% |
| ウェブアプリケーション（WEB） | 7 | 3 | 4 | 0 | 43% |
| セキュリティ共通（SEC-C） | 7 | 3 | 1 | 3 | 43% |
| セキュリティウェブ（SEC-W） | 4 | 0 | 3 | 1 | 0% |
| ユーザビリティ（USA） | 5 | 1 | 4 | 0 | 20% |
| **合計** | **30** | **12** | **14** | **4** | **40%** |

---

## 🟢 カバー済み観点

| # | 観点ID | 観点名 | 対応テストケース | カテゴリ |
|---|--------|--------|----------------|---------|
| 1 | VP-VAL-001 | 必須入力チェック | TC-001-23, TC-001-24, TC-001-25 | バリデーション |
| 2 | VP-VAL-002 | 形式チェック（メール形式） | TC-001-30, TC-001-31 | バリデーション |
| 3 | VP-VAL-003 | 文字種・特殊文字の扱い | TC-001-14, TC-001-15, TC-001-32 | バリデーション |
| 4 | VP-WEB-001 | ページ遷移（正常系） | TC-001-16, TC-001-33, TC-001-34, TC-001-35, TC-001-36 | ウェブ |
| 5 | VP-WEB-002 | 状態遷移（UI状態変化） | TC-001-17, TC-001-18, TC-001-10, TC-001-11 | ウェブ |
| 6 | VP-WEB-009 | Cookie・セッション管理 | TC-001-19, TC-001-20 | ウェブ |
| 7 | VP-SEC-C-001 | 認証（正常・異常） | TC-001-12~15, TC-001-26~28 | セキュリティ共通 |
| 8 | VP-SEC-C-002 | 認可（権限識別） | TC-001-21, TC-001-22 | セキュリティ共通 |
| 9 | VP-SEC-C-003 | パスワード保護（マスク表示） | TC-001-05 | セキュリティ共通 |
| 10 | VP-USA-001 | エラーフィードバック | TC-001-29 | ユーザビリティ |
| 11 | VP-VAL-006 | 境界値チェック | TC-001-30, TC-001-31, TC-001-32 | バリデーション |
| 12 | VP-WEB-010 | セッション維持（ページ遷移後） | TC-001-20, TC-001-37 | ウェブ |

---

## 🟡 未カバー推奨観点

| # | 観点ID | 観点名 | 推奨理由 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-VAL-004 | 最大文字数チェック | メール・パスワードフィールドに文字数上限が存在する可能性がある | バリデーション |
| 2 | VP-VAL-008 | 前後空白の扱い | メール・パスワードの前後空白のトリム処理はログイン成否に直結する | バリデーション |
| 3 | VP-VAL-009 | 全角半角の扱い | 全角文字でメールアドレスを入力した場合の挙動確認が必要 | バリデーション |
| 4 | VP-VAL-010 | コピーペースト入力 | パスワードマネージャー等からのペースト入力は一般的なユースケース | バリデーション |
| 5 | VP-WEB-003 | ブラウザバック | ログイン成功後にブラウザバックした場合の挙動確認が必要 | ウェブ |
| 6 | VP-WEB-004 | ページリロード | ログインページのリロード時にフォーム状態が保持されるか確認が必要 | ウェブ |
| 7 | VP-WEB-007 | レスポンシブ対応 | モバイル端末でのログインフォーム表示・操作性の確認 | ウェブ |
| 8 | VP-WEB-008 | ブラウザ互換性 | 主要ブラウザ（Chrome, Firefox, Safari, Edge）での動作確認 | ウェブ |
| 9 | VP-SEC-W-001 | XSS対策 | メール入力フィールドへのスクリプト注入テスト | セキュリティウェブ |
| 10 | VP-SEC-W-002 | SQLインジェクション対策 | 認証フォームへのSQL文字列入力テスト | セキュリティウェブ |
| 11 | VP-SEC-W-003 | CSRF対策 | ログインフォームのCSRFトークン検証 | セキュリティウェブ |
| 12 | VP-SEC-C-007 | ブルートフォース対策 | 連続ログイン失敗時のアカウントロック・レート制限の確認 | セキュリティ共通 |
| 13 | VP-USA-004 | キーボード操作（Enter送信） | パスワード入力後にEnterキーでログインできるか確認 | ユーザビリティ |
| 14 | VP-USA-005 | プレースホルダー・ラベル表示 | 入力フィールドのラベルやプレースホルダーが適切に表示されるか確認 | ユーザビリティ |

---

## 🔴 要確認観点

| # | 観点ID | 観点名 | 確認内容 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-SEC-C-004 | エラーメッセージ情報漏洩 | ログイン失敗時のエラーメッセージが「メールアドレスが存在しません」等の具体的情報を含まず、汎用的なメッセージになっているか。攻撃者へのアカウント存在有無の情報漏洩リスクがある | セキュリティ共通 |
| 2 | VP-SEC-C-005 | ログ・監査 | ログイン試行（成功・失敗）がサーバー側でログに記録されているか。テスト自動化練習サイトという性質上、実装されていない可能性がある | セキュリティ共通 |
| 3 | VP-SEC-C-006 | セッション固定化攻撃対策 | ログイン成功時にセッションIDが再生成されるか。Cookie認証を使用しているため、セッション固定化のリスクがある | セキュリティ共通 |
| 4 | VP-SEC-W-004 | クリックジャッキング対策 | X-Frame-Options や Content-Security-Policy ヘッダーの設定状況。ログインページがiframeに埋め込まれる攻撃リスクの有無 | セキュリティウェブ |

---

## 補完テストケース案

🟡項目に対する補完テストケース案を以下に示します。

### STC-001-01: メールアドレスフィールドの最大文字数チェック

| 項目 | 内容 |
|------|------|
| テストID | STC-001-01 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-VAL-004 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスフィールドに256文字以上の文字列を入力する
2. パスワードに任意の値を入力する
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] 入力が制限される、またはバリデーションエラーが表示されること

**根拠:** テスト観点カタログ VP-VAL-004 に基づく補完

---

### STC-001-02: メールアドレスの前後空白の扱い

| 項目 | 内容 |
|------|------|
| テストID | STC-001-02 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-VAL-008 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに「 ichiro@example.com 」（前後に空白）を入力する
2. パスワードに「password」を入力する
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] 前後の空白がトリムされてログインに成功する、またはバリデーションエラーが表示されること

**根拠:** テスト観点カタログ VP-VAL-008 に基づく補完

---

### STC-001-03: 全角文字でのメールアドレス入力

| 項目 | 内容 |
|------|------|
| テストID | STC-001-03 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-VAL-009 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに「ｉｃｈｉｒｏ＠ｅｘａｍｐｌｅ．ｃｏｍ」（全角）を入力する
2. パスワードに「password」を入力する
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] ログインに失敗すること（全角文字は認証情報と一致しないため）

**根拠:** テスト観点カタログ VP-VAL-009 に基づく補完

---

### STC-001-04: パスワードのコピーペースト入力

| 項目 | 内容 |
|------|------|
| テストID | STC-001-04 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-VAL-010 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに「ichiro@example.com」を入力する
2. パスワードフィールドに「password」をクリップボードからペーストする
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] ペースト入力が受け付けられ、ログインに成功すること

**根拠:** テスト観点カタログ VP-VAL-010 に基づく補完

---

### STC-001-05: ログイン成功後のブラウザバック

| 項目 | 内容 |
|------|------|
| テストID | STC-001-05 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-WEB-003 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. 登録済みユーザーでログインに成功する
2. トップページに遷移した後、ブラウザの戻るボタンをクリックする

**Then（期待結果）:**

- [ ] ログインページに戻った場合でもログイン状態が維持されること
- [ ] または、ログイン済みのため別のページにリダイレクトされること

**根拠:** テスト観点カタログ VP-WEB-003 に基づく補完

---

### STC-001-06: ログインページのリロード

| 項目 | 内容 |
|------|------|
| テストID | STC-001-06 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-WEB-004 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示
- メールアドレスとパスワードを入力済み（送信前）

**When（実行条件）:**

1. ブラウザのリロード（F5）を実行する

**Then（期待結果）:**

- [ ] ログインページが再表示されること
- [ ] 入力済みの値がクリアされる、または保持されること（挙動を確認）

**根拠:** テスト観点カタログ VP-WEB-004 に基づく補完

---

### STC-001-07: モバイル端末でのログインフォーム表示

| 項目 | 内容 |
|------|------|
| テストID | STC-001-07 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-WEB-007 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- モバイル端末（またはモバイルエミュレーション）を使用

**When（実行条件）:**

1. ログインページにアクセスする

**Then（期待結果）:**

- [ ] フォーム要素が画面幅に収まり、適切に表示されること
- [ ] ログインボタンがタップ可能なサイズで表示されること

**根拠:** テスト観点カタログ VP-WEB-007 に基づく補完

---

### STC-001-08: 主要ブラウザでのログイン動作確認

| 項目 | 内容 |
|------|------|
| テストID | STC-001-08 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-WEB-008 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- Chrome, Firefox, Safari, Edge の各ブラウザを使用

**When（実行条件）:**

1. 各ブラウザでログインページにアクセスする
2. 登録済みユーザーでログインする

**Then（期待結果）:**

- [ ] すべてのブラウザでログインフォームが正しく表示されること
- [ ] すべてのブラウザでログイン処理が正常に動作すること

**根拠:** テスト観点カタログ VP-WEB-008 に基づく補完

---

### STC-001-09: メールアドレスフィールドへのスクリプト注入（XSS）

| 項目 | 内容 |
|------|------|
| テストID | STC-001-09 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-SEC-W-001 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに `<script>alert('XSS')</script>` を入力する
2. パスワードに任意の値を入力する
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] スクリプトが実行されないこと
- [ ] 入力値が適切にエスケープまたはサニタイズされること

**根拠:** テスト観点カタログ VP-SEC-W-001 に基づく補完

---

### STC-001-10: 認証フォームへのSQLインジェクション

| 項目 | 内容 |
|------|------|
| テストID | STC-001-10 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-SEC-W-002 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに `' OR '1'='1` を入力する
2. パスワードに `' OR '1'='1` を入力する
3. ログインボタンをクリックする

**Then（期待結果）:**

- [ ] ログインに失敗すること（SQL文が実行されないこと）

**根拠:** テスト観点カタログ VP-SEC-W-002 に基づく補完

---

### STC-001-11: ログインフォームのCSRFトークン検証

| 項目 | 内容 |
|------|------|
| テストID | STC-001-11 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-SEC-W-003 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- ログインフォームのHTMLソースを確認

**When（実行条件）:**

1. フォームにCSRFトークン（hiddenフィールド）が含まれているか確認する
2. トークンを改竄してログインリクエストを送信する

**Then（期待結果）:**

- [ ] CSRFトークンが存在すること、またはSameSite Cookie等の代替対策が実装されていること
- [ ] 改竄トークンではログインが拒否されること

**根拠:** テスト観点カタログ VP-SEC-W-003 に基づく補完

---

### STC-001-12: 連続ログイン失敗時のアカウントロック

| 項目 | 内容 |
|------|------|
| テストID | STC-001-12 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-SEC-C-007 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. 正しいメールアドレスと誤ったパスワードで連続してログインを試行する（5回以上）

**Then（期待結果）:**

- [ ] 一定回数以上の連続失敗後にアカウントロックまたはレート制限が発動すること
- [ ] または、テスト自動化練習サイトのため未実装であることを確認

**根拠:** テスト観点カタログ VP-SEC-C-007 に基づく補完

---

### STC-001-13: パスワード入力後のEnterキーでログイン送信

| 項目 | 内容 |
|------|------|
| テストID | STC-001-13 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-USA-004 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスに「ichiro@example.com」を入力する
2. パスワードに「password」を入力する
3. パスワードフィールドにフォーカスがある状態でEnterキーを押す

**Then（期待結果）:**

- [ ] ログインボタンをクリックした時と同様にログイン処理が実行されること

**根拠:** テスト観点カタログ VP-USA-004 に基づく補完

---

### STC-001-14: 入力フィールドのラベル・プレースホルダー表示

| 項目 | 内容 |
|------|------|
| テストID | STC-001-14 |
| 対象機能 | F-001: ログイン |
| 対応観点 | VP-USA-005 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**

- 未ログイン状態でログインページを表示

**When（実行条件）:**

1. メールアドレスフィールドとパスワードフィールドを確認する

**Then（期待結果）:**

- [ ] 各フィールドにラベルまたはプレースホルダーが表示され、入力内容が明確であること

**根拠:** テスト観点カタログ VP-USA-005 に基づく補完

---

## 優先対応一覧

| # | 観点ID | 観点名 | 対応方針 | 信号 |
|---|--------|--------|---------|------|
| 1 | VP-SEC-C-004 | エラーメッセージ情報漏洩 | ステークホルダー確認（エラーメッセージのポリシー） | 🔴 |
| 2 | VP-SEC-C-006 | セッション固定化攻撃対策 | ステークホルダー確認（Cookie認証のセキュリティ要件） | 🔴 |
| 3 | VP-SEC-W-001 | XSS対策 | 補完テストケース案あり（STC-001-09） | 🟡 |
| 4 | VP-SEC-W-002 | SQLインジェクション対策 | 補完テストケース案あり（STC-001-10） | 🟡 |
| 5 | VP-SEC-W-003 | CSRF対策 | 補完テストケース案あり（STC-001-11） | 🟡 |
| 6 | VP-SEC-C-007 | ブルートフォース対策 | 補完テストケース案あり（STC-001-12） | 🟡 |
| 7 | VP-SEC-C-005 | ログ・監査 | ステークホルダー確認（練習サイトのため対象外の可能性） | 🔴 |
| 8 | VP-SEC-W-004 | クリックジャッキング対策 | ステークホルダー確認（レスポンスヘッダーの確認） | 🔴 |
| 9 | VP-VAL-008 | 前後空白の扱い | 補完テストケース案あり（STC-001-02） | 🟡 |
| 10 | VP-USA-004 | キーボード操作（Enter送信） | 補完テストケース案あり（STC-001-13） | 🟡 |
| 11 | VP-WEB-003 | ブラウザバック | 補完テストケース案あり（STC-001-05） | 🟡 |
| 12 | VP-VAL-004 | 最大文字数チェック | 補完テストケース案あり（STC-001-01） | 🟡 |
| 13 | VP-VAL-009 | 全角半角の扱い | 補完テストケース案あり（STC-001-03） | 🟡 |
| 14 | VP-VAL-010 | コピーペースト入力 | 補完テストケース案あり（STC-001-04） | 🟡 |
| 15 | VP-WEB-004 | ページリロード | 補完テストケース案あり（STC-001-06） | 🟡 |
| 16 | VP-WEB-007 | レスポンシブ対応 | 補完テストケース案あり（STC-001-07） | 🟡 |
| 17 | VP-WEB-008 | ブラウザ互換性 | 補完テストケース案あり（STC-001-08） | 🟡 |
| 18 | VP-USA-005 | プレースホルダー・ラベル表示 | 補完テストケース案あり（STC-001-14） | 🟡 |

---

## 参照カタログ情報

- **原典**: テスト観点カタログ v1.6
- **著作者**: TIS株式会社
- **ライセンス**: CC BY-SA 4.0 (Creative Commons Attribution-ShareAlike 4.0 International)
- **抽出範囲**: ブラックボックステスト関連項目（5セクション）
- **適用セクション**: VAL（バリデーション）, WEB（ウェブアプリケーション）, SEC-C（セキュリティ共通）, SEC-W（セキュリティウェブ）, USA（ユーザビリティ）

---

## 次のステップ

### 補完テストケースの反映

🟡項目の補完テストケース案を既存のテストケースに反映するには:

1. **手動追記**: `04_テストケース.md` に補完テストケース案をコピーして追記
2. **再生成**: 動作仕様（`02_動作仕様.md`）に観点を追加した上で、`/origami:generate-cases` を再実行

### 確認事項

- 🔴項目（4件）についてステークホルダーに確認
  - VP-SEC-C-004: エラーメッセージ情報漏洩ポリシー
  - VP-SEC-C-005: ログ・監査要件（練習サイトのため対象外の可能性）
  - VP-SEC-C-006: セッション固定化攻撃対策
  - VP-SEC-W-004: クリックジャッキング対策
- 🟡項目の補完テストケース案の妥当性を確認
- カバレッジ目標（推奨: 🟢 70%以上）に対して現在40%。補完テストケース14件を追加することで87%に向上可能
