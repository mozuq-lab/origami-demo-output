# F-008 宿泊予約入力 境界値分析

## 基本情報

| 項目 | 内容 |
|------|------|
| 機能ID | F-008 |
| 機能名 | 宿泊予約入力 |
| 入力ファイル | 02_動作仕様.md |

---

## 境界値分析対象パラメータ

### BV-001: 宿泊日の日付範囲

有効期間は「本日の翌日〜本日から3ヶ月以内（約90日後）」。

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-001-01 | 宿泊日 | 本日（当日） | 選択不可または無効 | 🟡 | N-001-01 |
| BV-001-02 | 宿泊日 | 本日の翌日（最小有効日） | 選択可能・有効 | 🟢 | M-002-03 |
| BV-001-03 | 宿泊日 | 本日から90日後（3ヶ月後、最大有効日） | 選択可能・有効 | 🟢 | M-002-03 |
| BV-001-04 | 宿泊日 | 本日から91日後（3ヶ月超） | 選択不可または無効 | 🟢 | N-001-01 |
| BV-001-05 | 宿泊日 | 過去の日付 | 選択不可または無効 | 🟡 | N-001-02 |

### BV-002: 宿泊数（プランに依存しない基本仕様）

フォーム上の宿泊数制約はプランのminTerm〜maxTermで決定。標準プラン（素泊まり: min=1, max=9）を代表値として分析。

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-002-01 | 宿泊数 | 0（minTermより小） | 入力エラー / 送信不可 | 🟢 | N-001-04 |
| BV-002-02 | 宿泊数 | 1（minTerm、下限値） | 有効 | 🟢 | M-003-03 |
| BV-002-03 | 宿泊数 | 9（maxTerm、上限値） | 有効 | 🟢 | M-003-03 |
| BV-002-04 | 宿泊数 | 10（maxTerm+1） | 入力エラー / 送信不可 | 🟢 | N-001-03 |
| BV-002-05 | 宿泊数 | 空欄 | 送信不可 | 🟢 | N-001-04 |

### BV-003: 宿泊数（プラン別上限・下限の検証）

特殊なmin/maxを持つプランの境界値。

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-003-01 | 宿泊数（id=7 貸し切り露天風呂） | 3（maxTerm=3, 上限値） | 有効 | 🟢 | M-003-03 |
| BV-003-02 | 宿泊数（id=7 貸し切り露天風呂） | 4（maxTerm+1） | 入力エラー / 送信不可 | 🟢 | N-001-03 |
| BV-003-03 | 宿泊数（id=8 カップル限定） | 2（maxTerm=2, 上限値） | 有効 | 🟢 | M-003-03 |
| BV-003-04 | 宿泊数（id=8 カップル限定） | 3（maxTerm+1） | 入力エラー / 送信不可 | 🟢 | N-001-03 |
| BV-003-05 | 宿泊数（id=9 テーマパーク優待） | 5（maxTerm=5, 上限値） | 有効 | 🟢 | M-003-03 |
| BV-003-06 | 宿泊数（id=9 テーマパーク優待） | 6（maxTerm+1） | 入力エラー / 送信不可 | 🟢 | N-001-03 |

### BV-004: 人数（プランに依存しない基本仕様）

標準プラン（素泊まり: min=1, max=2）を代表値として分析。

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-004-01 | 人数 | 0（minHeadCountより小） | 入力エラー / 送信不可 | 🟢 | N-001-06 |
| BV-004-02 | 人数 | 1（minHeadCount=1, 下限値） | 有効 | 🟢 | M-003-04 |
| BV-004-03 | 人数 | 2（maxHeadCount=2, 上限値） | 有効 | 🟢 | M-003-04 |
| BV-004-04 | 人数 | 3（maxHeadCount+1） | 入力エラー / 送信不可 | 🟢 | N-001-05 |
| BV-004-05 | 人数 | 空欄 | 送信不可 | 🟢 | N-001-06 |

### BV-005: 人数（プラン別上限・下限の検証）

特殊なmin/maxを持つプランの境界値。

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-005-01 | 人数（id=1 プレミアムプラン） | 2（minHeadCount=2, 下限値） | 有効 | 🟢 | M-003-04 |
| BV-005-02 | 人数（id=1 プレミアムプラン） | 1（minHeadCount-1） | 入力エラー / 送信不可 | 🟢 | N-001-06 |
| BV-005-03 | 人数（id=8 カップル限定） | 2（minHeadCount=maxHeadCount=2） | 有効（唯一の有効値） | 🟢 | M-003-04 |
| BV-005-04 | 人数（id=8 カップル限定） | 1（minHeadCount-1） | 入力エラー / 送信不可 | 🟢 | N-001-06 |
| BV-005-05 | 人数（id=6 エステ・マッサージ） | 6（maxHeadCount=6, 上限値） | 有効 | 🟢 | M-003-04 |
| BV-005-06 | 人数（id=6 エステ・マッサージ） | 7（maxHeadCount+1） | 入力エラー / 送信不可 | 🟢 | N-001-05 |

### BV-006: ご要望・ご連絡事項の文字数

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-006-01 | ご要望文字数 | 0文字（空欄） | 有効（任意項目） | 🟢 | M-010-01 |
| BV-006-02 | ご要望文字数 | 139文字（最大-1） | 入力可能 | 🟢 | M-010-02 |
| BV-006-03 | ご要望文字数 | 140文字（最大=maxlength） | 入力可能（上限値） | 🟢 | M-010-02 |
| BV-006-04 | ご要望文字数 | 141文字以上（最大超過） | 141文字目以降が入力されないこと | 🟢 | M-010-02 |

### BV-007: 電話番号の桁数

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-007-01 | 電話番号 | 10桁（11桁未満） | バリデーションエラー / 送信不可 | 🟢 | N-001-11 |
| BV-007-02 | 電話番号 | 11桁（有効値） | 有効 | 🟢 | M-009-03 |
| BV-007-03 | 電話番号 | 12桁（11桁超過） | バリデーションエラー / 送信不可 | 🟢 | N-001-11 |
| BV-007-04 | 電話番号 | 0桁（空欄）＋contact=tel | 必須エラー / 送信不可 | 🟢 | N-001-10 |

### BV-008: 連絡方法と連絡先フィールドの状態境界

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-008-01 | contact値 | 「選択してください」（初期値） | 送信不可、メール・電話ともdisabled | 🟢 | M-007-01, N-001-08 |
| BV-008-02 | contact値 | 「希望しない」 | 送信可（他必須項目充足時）、メール・電話ともdisabled | 🟢 | M-007-05 |
| BV-008-03 | contact値 | 「メールでのご連絡」 | メールフィールドenabled・必須、電話disabled | 🟢 | M-007-03, M-008-02 |
| BV-008-04 | contact値 | 「電話でのご連絡」 | 電話フィールドenabled・必須、メールdisabled | 🟢 | M-007-04, M-009-02 |

### BV-009: オプション選択数の境界

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-009-01 | オプション選択数 | 0個（全未選択） | 有効（オプション料金0円） | 🟢 | M-004-05 |
| BV-009-02 | オプション選択数 | 1個 | 有効（1,000円 × 宿泊数 × 人数 加算） | 🟢 | M-004-03 |
| BV-009-03 | オプション選択数 | 2個 | 有効（2,000円 × 宿泊数 × 人数 加算） | 🟢 | M-004-03, M-004-04 |
| BV-009-04 | オプション選択数 | 3個（全選択） | 有効（3,000円 × 宿泊数 × 人数 加算） | 🟢 | M-004-03, M-004-04 |

### BV-010: 合計金額計算の境界値

| No | パラメータ | 境界値 | 期待結果 | 信頼性 | 関連動作仕様 |
|----|-----------|--------|----------|--------|-------------|
| BV-010-01 | 合計金額（最小） | プレミアムプラン: 10,000円×1泊×2人=20,000円（オプションなし） | 20,000円と表示 | 🟢 | M-005-01 |
| BV-010-02 | 合計金額（最小・素泊まり） | 素泊まり: 5,500円×1泊×1人=5,500円（オプションなし） | 5,500円と表示 | 🟢 | M-005-01 |
| BV-010-03 | 合計金額（最大試算） | テーマパーク優待: 10,000円×5泊×9人 + 3オプション×1,000円×5泊×9人=450,000+135,000=585,000円 | 585,000円と表示 | 🟢 | M-005-01, M-005-02 |
| BV-010-04 | 合計金額（宿泊日未入力） | 宿泊日が空欄の状態 | 「-」と表示 | 🟢 | M-005-03 |

---

## 同値分割

### EP-001: 宿泊日の同値クラス

| クラス | 説明 | 代表値 | 期待結果 | 信頼性 |
|--------|------|--------|----------|--------|
| 有効範囲内 | 翌日〜3ヶ月以内 | 翌日 / 1ヶ月後 / 3ヶ月後 | 選択可能 | 🟢 |
| 範囲外（未来過ぎ） | 3ヶ月超 | 91日後 | 選択不可 | 🟢 |
| 範囲外（当日・過去） | 当日以前 | 本日 / 1日前 | 選択不可 | 🟡 |

### EP-002: 電話番号の文字種同値クラス

| クラス | 説明 | 代表値 | 期待結果 | 信頼性 |
|--------|------|--------|----------|--------|
| 半角数字のみ | pattern="[0-9]{11}"の有効クラス | 09012345678 | 有効 | 🟢 |
| 全角数字含む | 全角数字 | ０９０１２３４５６７８ | バリデーションエラー | 🟢 |
| アルファベット含む | 英字混在 | 0901234567a | バリデーションエラー | 🟢 |
| ハイフン含む | 区切り文字混在 | 090-1234-5678 | バリデーションエラー | 🟢 |

### EP-003: 氏名の同値クラス

| クラス | 説明 | 代表値 | 期待結果 | 信頼性 |
|--------|------|--------|----------|--------|
| 空欄 | 未入力 | 空欄 | 必須エラー / 送信不可 | 🟢 |
| 有効値 | 任意テキスト | 山田太郎 / John Doe | 有効 | 🟢 |
| スペースのみ | 空白文字 | （半角スペース） | 🟡 有効かどうか不明（HTML5のrequiredはスペースを許容する場合あり） | 🟡 |

---

## 信号サマリー

| 信号 | 件数 | 内容 |
|------|------|------|
| 🟢 | 42 | 宿泊日3件、宿泊数（基本）4件、宿泊数（プラン別）6件、人数（基本）4件、人数（プラン別）6件、ご要望4件、電話番号4件、連絡方法4件、オプション4件、合計金額4件、電話番号文字種4件、氏名2件 |
| 🟡 | 5 | 当日・過去日付の選択不可確認（Datepickerの設定詳細次第）、氏名スペースのみの扱い、電話番号の全角/ハイフン等の追加バリデーション詳細 |
| 🔴 | 0 | - |

---

## 備考

- 宿泊数・人数のmin/maxはプランIDによって動的に変化するため、代表プランに加えてmin/maxが異なるプランも検証が必要
- id=8（カップル限定）はmin=max=2という特殊制約（1人・3人以上は不可）のため優先的に検証
- 合計金額の最大値はテーマパーク優待プラン（10,000円）×最大5泊×最大9人+3オプション×1,000円×5泊×9人=585,000円
- 日付の「本日から3ヶ月」は月数計算（28/29/30/31日の月をまたぐ場合の正確な日数は🟡）
