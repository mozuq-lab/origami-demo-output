# 観点レビュー: F-004 マイページ表示

## 生成情報

- 生成日時: 2026-02-23 00:00
- 入力ソース: 04_テストケース.md, 01_機能詳細.md
- 参照カタログ: テスト観点カタログ v1.6（TIS株式会社, CC BY-SA 4.0）
- アプリ種別: web
- 対象機能: F-004 マイページ表示
- 総観点数: 22件（対象: 22件 / 対象外: 0件）
- 信号分布: 🟢 10件 / 🟡 8件 / 🔴 4件

---

## カバレッジサマリー

| セクション | 対象観点数 | 🟢 カバー済 | 🟡 未カバー推奨 | 🔴 要確認 | カバー率 |
|-----------|-----------|------------|----------------|----------|---------|
| バリデーション（VAL） | 3 | 1 | 1 | 1 | 33% |
| ウェブアプリケーション（WEB） | 7 | 5 | 2 | 0 | 71% |
| セキュリティ共通（SEC-C） | 5 | 2 | 2 | 1 | 40% |
| セキュリティウェブ（SEC-W） | 4 | 0 | 1 | 3 | 0% |
| ユーザビリティ（USA） | 3 | 2 | 2 | 0 | 67% |
| **合計** | **22** | **10** | **8** | **4** | **45%** |

※補完テストケース案（STC-004-01〜08）をすべて反映した場合、カバー率は推定 **82%** に向上

---

## 🟢 カバー済み観点

| # | 観点ID | 観点名 | 対応テストケース | カテゴリ |
|---|--------|--------|----------------|---------|
| 1 | VP-VAL-008 | データ一意性・データ分離（ユーザーごとの情報分離） | TC-004-24 | バリデーション |
| 2 | VP-WEB-001 | 正常系ページ遷移（ナビゲーション遷移） | TC-004-11, TC-004-12, TC-004-13 | ウェブ |
| 3 | VP-WEB-003 | 直接URLアクセス制御（未ログイン時） | TC-004-23 | ウェブ |
| 4 | VP-WEB-005 | ナビゲーションリンクの動作 | TC-004-02 | ウェブ |
| 5 | VP-WEB-006 | ページタイトルの正確性 | TC-004-01 | ウェブ |
| 6 | VP-WEB-007 | ユーザー種別による表示差異（条件付き表示） | TC-004-06, TC-004-07, TC-004-08, TC-004-09 | ウェブ |
| 7 | VP-SEC-C-001 | 認証制御（ログイン済みユーザーのみアクセス） | TC-004-23 | セキュリティ共通 |
| 8 | VP-SEC-C-005 | 他ユーザーのデータ不正表示防止 | TC-004-24 | セキュリティ共通 |
| 9 | VP-USA-002 | 情報項目の完全表示（8項目のラベル確認） | TC-004-03 | ユーザビリティ |
| 10 | VP-USA-004 | 登録データの正確な表示 | TC-004-04, TC-004-05, TC-004-09 | ユーザビリティ |

---

## 🟡 未カバー推奨観点

| # | 観点ID | 観点名 | 推奨理由 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-VAL-003 | 表示データの最大長対応（長大文字列の表示） | 氏名・住所に非常に長い文字列が登録されている場合、マイページでの表示が崩れないかが未確認 | バリデーション |
| 2 | VP-WEB-002 | ブラウザバック後の表示 | ログアウト後にブラウザバックでマイページに戻った場合、認証済み情報が表示されないかが未確認 | ウェブ |
| 3 | VP-SEC-C-003 | Local Storageデータの保護 | マイページ表示時にLocal Storageから読み込んだデータが適切に扱われているか（意図しないデータ漏洩等）が未確認 | セキュリティ共通 |
| 4 | VP-SEC-C-006 | セッション有効期限（Cookie/セッション切れ） | Cookieが削除・期限切れになった状態でマイページを再表示した場合の挙動が未確認 | セキュリティ共通 |
| 5 | VP-SEC-W-001 | XSS対策（登録済みスクリプトの表示） | 氏名・住所等にXSSペイロードが登録されている場合（F-003のSTC-003-08に連動）、マイページ表示時にスクリプトが実行されないかが未確認 | セキュリティウェブ |
| 6 | VP-USA-001 | 空値・未登録項目の表示品質 | 住所・電話番号・生年月日等の未登録任意項目の表示形式（空欄・「-」・「未登録」等）の一貫性が未確認 | ユーザビリティ |
| 7 | VP-USA-003 | キーボードアクセシビリティ | Tabキーによるフォーカス移動がアイコン設定リンク・退会ボタン等の操作要素に正しく機能するかが未確認 | ユーザビリティ |
| 8 | VP-WEB-008 | ページリロード後の表示維持 | マイページをブラウザリロード（F5）した場合にログイン状態が維持されて情報が再表示されるかが未確認 | ウェブ |

---

## 🔴 要確認観点

| # | 観点ID | 観点名 | 確認内容 | カテゴリ |
|---|--------|--------|---------|---------|
| 1 | VP-VAL-009 | 表示データの整合性検証 | マイページ表示データとLocal Storageに保存されているデータの整合性を自動検証する手段の要否。テストレベルでの整合性確認方針はステークホルダー確認が必要 | バリデーション |
| 2 | VP-SEC-W-003 | CSRF対策（退会ボタン等のアクション） | 退会ボタン等のアクションに対するCSRF対策の要否。クライアントサイドのみの構成だが、対策要件はステークホルダー確認が必要 | セキュリティウェブ |
| 3 | VP-SEC-W-004 | クリックジャッキング対策 | マイページをiframeで埋め込まれた場合のクリックジャッキング対策（X-Frame-Options等）の有無。ページレベルの設定のためステークホルダー確認が必要 | セキュリティウェブ |
| 4 | VP-SEC-C-004 | ログ・監査証跡 | マイページへのアクセスログの記録要否。クライアントサイドのみの構成のため、サーバーサイドログ要件はステークホルダー確認が必要 | セキュリティ共通 |

---

## 補完テストケース案

🟡項目に対する補完テストケース案を以下に示します。

### STC-004-01: 長大文字列登録時のマイページ表示崩れ確認

| 項目 | 内容 |
|------|------|
| テストID | STC-004-01 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-VAL-003 |
| テスト種別 | 異常系 |
| 信号 | 🟡 |

**Given（前提条件）:**
- 氏名に100文字以上の長大文字列、住所に200文字以上の長大文字列を入力して会員登録したユーザーでログイン済みである

**When（実行条件）:**
1. マイページ（mypage.html）を表示する

**Then（期待結果）:**
- [ ] ページレイアウトが崩れないこと
- [ ] 長大文字列が適切に折り返し表示またはトランケートされること
- [ ] 他の項目の表示に影響しないこと

**根拠:** テスト観点カタログ VP-VAL-003 に基づく補完

---

### STC-004-02: ログアウト後のブラウザバックによるマイページアクセス

| 項目 | 内容 |
|------|------|
| テストID | STC-004-02 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-WEB-002 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- ichiro@example.com でログイン後、マイページを閲覧し、ログアウトが完了している

**When（実行条件）:**
1. ブラウザの「戻る」ボタンをクリックしてマイページに戻ろうとする

**Then（期待結果）:**
- [ ] ログアウト済みのためマイページ情報が表示されないこと（再ログイン要求またはリダイレクト）
- [ ] キャッシュされたユーザー情報が表示されないこと

**根拠:** テスト観点カタログ VP-WEB-002 に基づく補完

---

### STC-004-03: Cookieが削除された状態でのマイページアクセス

| 項目 | 内容 |
|------|------|
| テストID | STC-004-03 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-SEC-C-006 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- マイページが表示されている状態で、ブラウザの開発者ツールを使いCookieを手動削除する

**When（実行条件）:**
1. マイページをリロード（F5）する

**Then（期待結果）:**
- [ ] Cookieが削除されたため認証が無効化され、ユーザー情報が表示されないこと
- [ ] ログインページへのリダイレクト等の適切な処理が行われること

**根拠:** テスト観点カタログ VP-SEC-C-006 に基づく補完

---

### STC-004-04: XSSペイロード登録済みデータのマイページ表示

| 項目 | 内容 |
|------|------|
| テストID | STC-004-04 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-SEC-W-001 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- 氏名に `<script>alert('XSS')</script>` を入力して会員登録（F-003 STC-003-08参照）したユーザーでログイン済みである

**When（実行条件）:**
1. マイページ（mypage.html）を表示する

**Then（期待結果）:**
- [ ] JavaScriptアラートが実行されないこと（XSS未発生）
- [ ] 氏名フィールドにHTMLエスケープされた文字列が表示されること

**根拠:** テスト観点カタログ VP-SEC-W-001 に基づく補完

---

### STC-004-05: 未登録任意項目の表示形式の一貫性確認

| 項目 | 内容 |
|------|------|
| テストID | STC-004-05 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-USA-001 |
| テスト種別 | ユーザビリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- 住所・電話番号・生年月日をすべて未入力で会員登録したユーザーでログイン済みである

**When（実行条件）:**
1. マイページ（mypage.html）を表示する

**Then（期待結果）:**
- [ ] 未登録の任意項目すべてに同一形式の空表示がなされること（例: すべて「-」またはすべて空欄）
- [ ] 表示形式に不統一がないこと

**根拠:** テスト観点カタログ VP-USA-001 に基づく補完

---

### STC-004-06: マイページのキーボードアクセシビリティ確認

| 項目 | 内容 |
|------|------|
| テストID | STC-004-06 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-USA-003 |
| テスト種別 | ユーザビリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- 新規登録ユーザーでログイン済みで、マイページが表示されている

**When（実行条件）:**
1. Tabキーを繰り返し押してページ内のフォーカス移動を確認する

**Then（期待結果）:**
- [ ] アイコン設定リンクにTabキーでフォーカスが移動すること
- [ ] 退会ボタンにTabキーでフォーカスが移動すること
- [ ] ナビゲーションリンクにTabキーでフォーカスが移動すること

**根拠:** テスト観点カタログ VP-USA-003 に基づく補完

---

### STC-004-07: ページリロード後のログイン状態維持確認

| 項目 | 内容 |
|------|------|
| テストID | STC-004-07 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-WEB-008 |
| テスト種別 | 正常系 |
| 信号 | 🟡 |

**Given（前提条件）:**
- ログイン済みで、マイページが表示されている

**When（実行条件）:**
1. ブラウザのリロードボタン（またはF5キー）でページを再読み込みする

**Then（期待結果）:**
- [ ] ログイン状態が維持され、ユーザー情報が再度正しく表示されること
- [ ] ログアウトされないこと

**根拠:** テスト観点カタログ VP-WEB-008 に基づく補完

---

### STC-004-08: Local Storageへの直接アクセスによるデータ操作の影響確認

| 項目 | 内容 |
|------|------|
| テストID | STC-004-08 |
| 対象機能 | F-004: マイページ表示 |
| 対応観点 | VP-SEC-C-003 |
| テスト種別 | セキュリティ |
| 信号 | 🟡 |

**Given（前提条件）:**
- ichiro@example.com でログイン済みで、マイページが表示されている

**When（実行条件）:**
1. ブラウザ開発者ツールを開き、Local Storageのユーザーデータを確認する
2. 表示されているデータ構造・保存形式を記録する

**Then（期待結果）:**
- [ ] Local Storageに保存されているデータ構造が確認できること
- [ ] パスワードが平文で保存されているかどうかを確認・記録すること
- 注: テスト自動化練習サイトのため、データ保護レベルの実態を把握しておくことが推奨される

**根拠:** テスト観点カタログ VP-SEC-C-003 に基づく補完

---

## 優先対応一覧

| # | 観点ID | 観点名 | 対応方針 | 信号 |
|---|--------|--------|---------|------|
| 1 | VP-SEC-W-001 | XSSペイロード表示対策 | 補完テストケース案あり（STC-004-04） | 🟡 |
| 2 | VP-WEB-002 | ログアウト後ブラウザバックによる情報漏洩防止 | 補完テストケース案あり（STC-004-02） | 🟡 |
| 3 | VP-SEC-C-006 | Cookie/セッション切れ時の挙動 | 補完テストケース案あり（STC-004-03） | 🟡 |
| 4 | VP-VAL-003 | 長大文字列のレイアウト崩れ | 補完テストケース案あり（STC-004-01） | 🟡 |
| 5 | VP-USA-001 | 未登録任意項目の表示形式一貫性 | 補完テストケース案あり（STC-004-05） | 🟡 |
| 6 | VP-SEC-W-003 | CSRF対策（退会ボタン） | ステークホルダー確認（対策要否を確認） | 🔴 |
| 7 | VP-SEC-C-004 | ログ・監査証跡 | ステークホルダー確認（クライアントサイドのみの構成） | 🔴 |

---

## 参照カタログ情報

- **原典**: テスト観点カタログ v1.6
- **著作者**: TIS株式会社
- **ライセンス**: CC BY-SA 4.0 (Creative Commons Attribution-ShareAlike 4.0 International)
- **抽出範囲**: ブラックボックステスト関連項目（5セクション、203項目）
- **適用セクション**: バリデーション（VAL）、ウェブアプリケーション（WEB）、セキュリティ共通（SEC-C）、セキュリティウェブ（SEC-W）、ユーザビリティ（USA）

---

## 次のステップ

### 補完テストケースの反映

🟡項目の補完テストケース案を既存のテストケースに反映するには:

1. **手動追記**: `04_テストケース.md` に補完テストケース案をコピーして追記
2. **再生成**: 動作仕様（`02_動作仕様.md`）に観点を追加した上で、`/origami:generate-cases` を再実行

### 確認事項

- 🔴項目についてステークホルダーに確認
- 🟡項目の補完テストケース案の妥当性を確認
- カバレッジ目標（推奨: 🟢 70%以上）の達成状況を確認（現在45%、補完後推定82%）
- WEB・USA セクションは元々カバー率が高め（71%・67%）のため優先度は低い
